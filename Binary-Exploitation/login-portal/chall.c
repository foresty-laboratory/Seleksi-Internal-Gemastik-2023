#include <stdio.h>
#include <stdlib.h>

#define ADMIN_UID 1337

// gcc -fno-stack-protector -no-pie chall.c -o chall

struct User
{
    char name[0x30];
    int uid;
};

void login_user(void)
{
    struct User user;
    
    puts("== Welcome to the TurboLike v1.0 login portal ==");
    puts("Tell me your name and I will tell you your uid!");
    puts("Just don't tell me your name is admin, that would be too easy ;)");
    printf("Name: ");
    
    gets(&user.name);
    
    printf("Hello, %s your uid is %x!\n", user.name, user.uid);

    if (user.uid == ADMIN_UID) {
        puts("Welcome back admin! Here is what you looking for~");
        system("/bin/sh");
    } else {
        puts("You are not admin!");
    }    
}

int main(void)
{
    // disable buffering
    setvbuf(stdin , NULL, _IONBF, 0);
    setvbuf(stdout, NULL, _IONBF, 0);
    setvbuf(stderr, NULL, _IONBF, 0);

    login_user();

    return 0;
}