#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>

#define MAX_NUMBER 20

// gcc chall.c -o chall

int num_size, i;
char c;

void sort(unsigned long *num, int max_n)
{
    for (int i = 0; i < max_n - 1; i++) {
        for (int j = 0; j < max_n - i - 1; j++) {
            if (num[j] > num[j + 1]) {
                unsigned long temp = num[j];
                num[j] = num[j + 1];
                num[j + 1] = temp;
            }
        }
    }
}

void input_numbers(unsigned long *num, int max_n)
{
    for (int i = 0; i < max_n; i++) {
        printf("Enter number %d of %d: ", i + 1, max_n);
        scanf("%lu", &num[i]);
    }
}

void print_numbers(unsigned long *num, int max_n)
{
    for (int i = 0; i < max_n; i++) {
        printf("%lu ", num[i]);
    }
    printf("\n");
}

int main(void)
{
    // disable buffering
    setvbuf(stdin , NULL, _IONBF, 0);
    setvbuf(stdout, NULL, _IONBF, 0);
    setvbuf(stderr, NULL, _IONBF, 0);

    puts("== Welcome to the TurboSort service ==");
    puts("Like the name suggests, we sort numbers really fast!");
    puts("Give me your numbers and I'll sort them for you!");

    unsigned long num[MAX_NUMBER];
    bool do_sort = true;

    while (do_sort) {
        puts("How many numbers do you have?");
        scanf("%d", &num_size);

        printf("Okay, give me %d numbers!\n", num_size);

        // if (num_size > 20) {
        //     puts("Sorry, we can only sort 20 numbers at a time.");
        //     exit(1);
        // }

        input_numbers(num, num_size);

        printf("Sorting %d numbers...\n", num_size);
        sort(num, num_size);

        puts("Here are your numbers, in order:");
        print_numbers(num, num_size);

        puts("Do you want to sort more numbers? (y/n)");
        scanf(" %c", &c);

        do_sort = (c == 'y');
    }

    
    puts("\nThanks for using TurboSort!");

    return 0;
}